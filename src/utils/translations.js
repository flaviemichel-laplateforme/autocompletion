// Traductions des catégories
export const categoryTranslations = {
    'Beef': 'Bœuf',
    'Chicken': 'Poulet',
    'Dessert': 'Dessert',
    'Lamb': 'Agneau',
    'Miscellaneous': 'Divers',
    'Pasta': 'Pâtes',
    'Pork': 'Porc',
    'Seafood': 'Fruits de mer',
    'Side': 'Accompagnement',
    'Starter': 'Entrée',
    'Vegan': 'Végétalien',
    'Vegetarian': 'Végétarien',
    'Breakfast': 'Petit-déjeuner',
    'Goat': 'Chèvre'
};

// Traductions des zones géographiques
export const areaTranslations = {
    'American': 'Américain',
    'British': 'Britannique',
    'Canadian': 'Canadien',
    'Chinese': 'Chinois',
    'Croatian': 'Croate',
    'Dutch': 'Néerlandais',
    'Egyptian': 'Égyptien',
    'French': 'Français',
    'Greek': 'Grec',
    'Indian': 'Indien',
    'Irish': 'Irlandais',
    'Italian': 'Italien',
    'Jamaican': 'Jamaïcain',
    'Japanese': 'Japonais',
    'Kenyan': 'Kenyan',
    'Malaysian': 'Malaisien',
    'Mexican': 'Mexicain',
    'Moroccan': 'Marocain',
    'Polish': 'Polonais',
    'Portuguese': 'Portugais',
    'Russian': 'Russe',
    'Spanish': 'Espagnol',
    'Thai': 'Thaïlandais',
    'Tunisian': 'Tunisien',
    'Turkish': 'Turc',
    'Unknown': 'Inconnu',
    'Vietnamese': 'Vietnamien'
};

// Traductions des ingrédients courants
export const ingredientTranslations = {
    // Viandes
    'Chicken': 'Poulet',
    'Beef': 'Bœuf',
    'Pork': 'Porc',
    'Lamb': 'Agneau',
    'Turkey': 'Dinde',
    'Bacon': 'Bacon',
    'Sausage': 'Saucisse',
    'Ham': 'Jambon',
    'Minced Beef': 'Bœuf haché',
    'Chicken Breast': 'Blanc de poulet',
    'Chicken Thighs': 'Cuisses de poulet',

    // Poissons et fruits de mer
    'Salmon': 'Saumon',
    'Tuna': 'Thon',
    'Cod': 'Cabillaud',
    'Prawns': 'Crevettes',
    'Shrimp': 'Crevettes',
    'Mussels': 'Moules',
    'Squid': 'Calmar',
    'Crab': 'Crabe',
    'Lobster': 'Homard',

    // Légumes
    'Onion': 'Oignon',
    'Onions': 'Oignons',
    'Garlic': 'Ail',
    'Tomato': 'Tomate',
    'Tomatoes': 'Tomates',
    'Potato': 'Pomme de terre',
    'Potatoes': 'Pommes de terre',
    'Carrot': 'Carotte',
    'Carrots': 'Carottes',
    'Celery': 'Céleri',
    'Pepper': 'Poivron',
    'Bell Pepper': 'Poivron',
    'Red Pepper': 'Poivron rouge',
    'Green Pepper': 'Poivron vert',
    'Mushrooms': 'Champignons',
    'Spinach': 'Épinards',
    'Lettuce': 'Laitue',
    'Cucumber': 'Concombre',
    'Courgette': 'Courgette',
    'Zucchini': 'Courgette',
    'Aubergine': 'Aubergine',
    'Eggplant': 'Aubergine',
    'Broccoli': 'Brocoli',
    'Cauliflower': 'Chou-fleur',
    'Cabbage': 'Chou',
    'Leek': 'Poireau',
    'Peas': 'Petits pois',
    'Green Beans': 'Haricots verts',
    'Sweetcorn': 'Maïs',
    'Corn': 'Maïs',

    // Herbes et épices
    'Salt': 'Sel',
    'Pepper': 'Poivre',
    'Black Pepper': 'Poivre noir',
    'Paprika': 'Paprika',
    'Cumin': 'Cumin',
    'Coriander': 'Coriandre',
    'Basil': 'Basilic',
    'Oregano': 'Origan',
    'Thyme': 'Thym',
    'Rosemary': 'Romarin',
    'Parsley': 'Persil',
    'Mint': 'Menthe',
    'Dill': 'Aneth',
    'Cinnamon': 'Cannelle',
    'Nutmeg': 'Noix de muscade',
    'Ginger': 'Gingembre',
    'Chilli': 'Piment',
    'Chili': 'Piment',
    'Cayenne Pepper': 'Poivre de Cayenne',
    'Turmeric': 'Curcuma',
    'Bay Leaf': 'Feuille de laurier',
    'Bay Leaves': 'Feuilles de laurier',

    // Produits laitiers
    'Milk': 'Lait',
    'Butter': 'Beurre',
    'Cream': 'Crème',
    'Double Cream': 'Crème épaisse',
    'Single Cream': 'Crème liquide',
    'Cheese': 'Fromage',
    'Cheddar Cheese': 'Cheddar',
    'Parmesan': 'Parmesan',
    'Mozzarella': 'Mozzarella',
    'Yogurt': 'Yaourt',
    'Yoghurt': 'Yaourt',

    // Pâtes et céréales
    'Pasta': 'Pâtes',
    'Spaghetti': 'Spaghetti',
    'Penne': 'Penne',
    'Fusilli': 'Fusilli',
    'Rice': 'Riz',
    'Basmati Rice': 'Riz basmati',
    'Flour': 'Farine',
    'Bread': 'Pain',
    'Breadcrumbs': 'Chapelure',

    // Condiments et sauces
    'Olive Oil': 'Huile d\'olive',
    'Vegetable Oil': 'Huile végétale',
    'Oil': 'Huile',
    'Vinegar': 'Vinaigre',
    'Soy Sauce': 'Sauce soja',
    'Tomato Puree': 'Purée de tomate',
    'Tomato Paste': 'Concentré de tomate',
    'Ketchup': 'Ketchup',
    'Mustard': 'Moutarde',
    'Mayonnaise': 'Mayonnaise',
    'Stock': 'Bouillon',
    'Chicken Stock': 'Bouillon de poulet',
    'Beef Stock': 'Bouillon de bœuf',
    'Vegetable Stock': 'Bouillon de légumes',

    // Autres
    'Egg': 'Œuf',
    'Eggs': 'Œufs',
    'Sugar': 'Sucre',
    'Brown Sugar': 'Sucre roux',
    'Honey': 'Miel',
    'Lemon': 'Citron',
    'Lemon Juice': 'Jus de citron',
    'Lime': 'Citron vert',
    'Water': 'Eau',
    'Wine': 'Vin',
    'Red Wine': 'Vin rouge',
    'White Wine': 'Vin blanc',
    'Beans': 'Haricots',
    'Chickpeas': 'Pois chiches',
    'Lentils': 'Lentilles',
    'Nuts': 'Noix',
    'Almonds': 'Amandes',
    'Walnuts': 'Noix',
    'Peanuts': 'Cacahuètes'
};

// Fonction helper pour traduire
export const translate = (text, translationMap) => {
    if (!text) return text;
    return translationMap[text] || text;
};

// Fonction pour traduire les ingrédients (gère aussi les variations)
export const translateIngredient = (ingredient) => {
    if (!ingredient) return ingredient;

    // Cherche une correspondance exacte
    if (ingredientTranslations[ingredient]) {
        return ingredientTranslations[ingredient];
    }

    // Cherche une correspondance partielle (par exemple "Fresh Basil" -> "Basilic")
    for (const [english, french] of Object.entries(ingredientTranslations)) {
        if (ingredient.toLowerCase().includes(english.toLowerCase())) {
            return ingredient.replace(new RegExp(english, 'gi'), french);
        }
    }

    return ingredient;
};

// Dictionnaire de traduction pour les termes de cuisine courants dans les instructions
const cookingTerms = {
    // Verbes de cuisine
    'Heat': 'Chauffer',
    'heat': 'chauffer',
    'Add': 'Ajouter',
    'add': 'ajouter',
    'Mix': 'Mélanger',
    'mix': 'mélanger',
    'Stir': 'Remuer',
    'stir': 'remuer',
    'Cook': 'Cuire',
    'cook': 'cuire',
    'Boil': 'Bouillir',
    'boil': 'bouillir',
    'Fry': 'Frire',
    'fry': 'frire',
    'Bake': 'Cuire au four',
    'bake': 'cuire au four',
    'Roast': 'Rôtir',
    'roast': 'rôtir',
    'Grill': 'Griller',
    'grill': 'griller',
    'Slice': 'Trancher',
    'slice': 'trancher',
    'Chop': 'Hacher',
    'chop': 'hacher',
    'Dice': 'Couper en dés',
    'dice': 'couper en dés',
    'Peel': 'Éplucher',
    'peel': 'éplucher',
    'Drain': 'Égoutter',
    'drain': 'égoutter',
    'Season': 'Assaisonner',
    'season': 'assaisonner',
    'Serve': 'Servir',
    'serve': 'servir',
    'Pour': 'Verser',
    'pour': 'verser',
    'Simmer': 'Mijoter',
    'simmer': 'mijoter',
    'Whisk': 'Fouetter',
    'whisk': 'fouetter',
    'Blend': 'Mixer',
    'blend': 'mixer',
    'Sprinkle': 'Saupoudrer',
    'sprinkle': 'saupoudrer',
    'Cover': 'Couvrir',
    'cover': 'couvrir',
    'Remove': 'Retirer',
    'remove': 'retirer',
    'Place': 'Placer',
    'place': 'placer',
    'Put': 'Mettre',
    'put': 'mettre',

    // Termes de temps et température
    'minutes': 'minutes',
    'minute': 'minute',
    'hours': 'heures',
    'hour': 'heure',
    'seconds': 'secondes',
    'until': 'jusqu\'à ce que',
    'golden brown': 'doré',
    'tender': 'tendre',
    'crispy': 'croustillant',

    // Autres termes courants
    'the': 'le/la',
    'and': 'et',
    'with': 'avec',
    'in': 'dans',
    'on': 'sur',
    'to': 'à',
    'for': 'pendant',
    'from': 'de',
    'over': 'sur',
    'under': 'sous',
    'then': 'puis',
    'once': 'une fois',
    'when': 'quand',
    'while': 'pendant que'
};

// Fonction pour traduire les instructions (version simplifiée)
export const translateInstructions = async (instructions) => {
    if (!instructions) return instructions;

    try {
        // Limite de l'API MyMemory : 500 caractères par requête
        const maxLength = 500;
        let translatedText = '';

        // Diviser le texte en morceaux si nécessaire
        const chunks = [];
        const sentences = instructions.split(/\.\s+/);
        let currentChunk = '';

        for (const sentence of sentences) {
            if ((currentChunk + sentence).length < maxLength) {
                currentChunk += sentence + '. ';
            } else {
                if (currentChunk) chunks.push(currentChunk);
                currentChunk = sentence + '. ';
            }
        }
        if (currentChunk) chunks.push(currentChunk);

        // Traduire chaque morceau
        for (const chunk of chunks) {
            const text = encodeURIComponent(chunk);
            const response = await fetch(
                `https://api.mymemory.translated.net/get?q=${text}&langpair=en|fr`
            );
            const data = await response.json();

            if (data.responseStatus === 200 && data.responseData.translatedText) {
                translatedText += data.responseData.translatedText + ' ';
            } else {
                // Si la traduction échoue, utiliser le texte original
                translatedText += chunk + ' ';
            }

            // Pause pour éviter de surcharger l'API
            await new Promise(resolve => setTimeout(resolve, 200));
        }

        return translatedText.trim();
    } catch (error) {
        console.error('Erreur de traduction:', error);
        // En cas d'erreur, retourner le texte original
        return instructions;
    }
};
